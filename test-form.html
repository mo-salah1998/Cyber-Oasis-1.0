<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .form-group { margin: 10px 0; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; margin-bottom: 10px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        .debug { background: #f8f9fa; padding: 10px; margin: 10px 0; border: 1px solid #dee2e6; }
    </style>
</head>
<body>
    <h1>Registration Form Test</h1>
    
    <form id="registration-form" method="POST" action="/api/register">
        <div class="form-group">
            <label for="team-name">Team Name *</label>
            <input type="text" id="team-name" name="team-name" required>
        </div>
        
        <div class="form-group">
            <label for="university">University *</label>
            <select id="university" name="university" required>
                <option value="">Select University</option>
                <option value="test-university">Test University</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="leader-name">Leader Name *</label>
            <input type="text" id="leader-name" name="leader-name" required>
        </div>
        
        <div class="form-group">
            <label for="member-name">Member Name *</label>
            <input type="text" id="member-name" name="member-name" required>
        </div>
        
        <div class="form-group">
            <label for="faculty">Faculty *</label>
            <input type="text" id="faculty" name="faculty" required>
        </div>
        
        <div class="form-group">
            <label for="study-level">Study Level *</label>
            <select id="study-level" name="study-level" required>
                <option value="">Select Level</option>
                <option value="bachelor">Bachelor</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="field-study">Field of Study *</label>
            <input type="text" id="field-study" name="field-study" required>
        </div>
        
        <div class="form-group">
            <label for="leader-email">Leader Email *</label>
            <input type="email" id="leader-email" name="leader-email" required>
        </div>
        
        <div class="form-group">
            <label for="leader-phone">Leader Phone *</label>
            <input type="tel" id="leader-phone" name="leader-phone" required>
        </div>
        
        <div class="form-group">
            <label for="cyber-knowledge">Cyber Knowledge *</label>
            <select id="cyber-knowledge" name="cyber-knowledge" required>
                <option value="">Select Level</option>
                <option value="beginner">Beginner</option>
            </select>
        </div>
        
        <div class="form-group">
            <label>Hackathon Experience *</label>
            <label><input type="radio" name="hackathon-experience" value="no" checked> No</label>
        </div>
        
        <button type="submit">Submit Registration</button>
    </form>
    
    <div class="debug">
        <h3>Debug Info:</h3>
        <div id="debug-output"></div>
    </div>

    <script>
        document.getElementById('registration-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const debugOutput = document.getElementById('debug-output');
            debugOutput.innerHTML = '<p>Processing form...</p>';
            
            // Get form data using FormData
            const formDataObj = new FormData(this);
            const formData = {
                teamName: formDataObj.get('team-name'),
                university: formDataObj.get('university'),
                leaderName: formDataObj.get('leader-name'),
                memberName: formDataObj.get('member-name'),
                faculty: formDataObj.get('faculty'),
                studyLevel: formDataObj.get('study-level'),
                fieldStudy: formDataObj.get('field-study'),
                leaderEmail: formDataObj.get('leader-email'),
                leaderPhone: formDataObj.get('leader-phone'),
                cyberKnowledge: formDataObj.get('cyber-knowledge'),
                hackathonExperience: formDataObj.get('hackathon-experience'),
                hackathonSpecify: ''
            };
            
            debugOutput.innerHTML = `
                <p><strong>Form Data:</strong></p>
                <pre>${JSON.stringify(formData, null, 2)}</pre>
            `;
            
            try {
                const response = await fetch('/api/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                debugOutput.innerHTML += `
                    <p><strong>Response:</strong></p>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                `;
                
                if (response.ok) {
                    debugOutput.innerHTML += '<p style="color: green;">✅ Registration successful!</p>';
                } else {
                    debugOutput.innerHTML += '<p style="color: red;">❌ Registration failed!</p>';
                }
            } catch (error) {
                debugOutput.innerHTML += `<p style="color: red;">❌ Error: ${error.message}</p>`;
            }
        });
    </script>
</body>
</html>
